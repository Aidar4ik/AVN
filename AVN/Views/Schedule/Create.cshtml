@model List<ScheduleVM>
@{
    ViewData["Title"] = "Create Schedule";
}

<h2>Create Schedule</h2>

<form asp-action="Create">
    <table class="table" id="scheduleTable">
        <thead>
            <tr>
                <th>Дни</th>
                <th>Начало</th>
                <th>Конец</th>
                <th>Группа</th>
                <th>Предмет</th>
                <th>Преподаватель</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @for (var i = 0; i < Model.Count; i++)
            {
                <tr>
                    <td><select asp-for="@Model[i].Days" asp-items="Html.GetEnumSelectList<DaysOfTheWeek>()" class="form-control"></select></td>
                    <td><input asp-for="@Model[i].StartTime" type="time" class="form-control" /></td>
                    <td><input asp-for="@Model[i].EndTime" type="time" class="form-control" /></td>
                    <td><input asp-for="@Model[i].Group.GroupName" class="form-control" /></td>
                    <td><input asp-for="@Model[i].Subject.Title" class="form-control" /></td>
                    <td><input asp-for="@Model[i].Employee.FullName" class="form-control" /></td>
                    <td><button type="button" class="btn btn-danger removeRow">Remove</button></td>
                </tr>
            }
        </tbody>
    </table>
    <button type="button" class="btn btn-primary" id="addRow">Add Row</button>
    <input type="submit" value="Create" class="btn btn-success" />
</form>

@section Scripts {
    <script>
        var index = @Model.Count;
        $('#addRow').click(function () {
            var newRow = '<tr>' +
                '<td><select name="[' + index + '].Days" class="form-control">' +
                '<option value="0">Понедельник</option>' +
                '<option value="1">Вторник</option>' +
                '<option value="2">Среда</option>' +
                '<option value="3">Четверг</option>' +
                '<option value="4">Пятница</option>' +
                '<option value="5">Суббота</option>' +
                '<option value="6">Воскресенье</option>' +
                '</select></td>'
                +
                '<td><input name="[' + index + '].StartTime" type="time" class="form-control" /></td>' +
                '<td><input name="[' + index + '].EndTime" type="time" class="form-control" /></td>' +
                '<td><input name="[' + index + '].GroupId" class="form-control" /></td>' +
                '<td><input name="[' + index + '].SubjectId" class="form-control" /></td>' +
                '<td><input name="[' + index + '].EmployeeId" class="form-control" /></td>' +
                '<td><button type="button" class="btn btn-danger removeRow">Remove</button></td>' +
                '</tr>';
            $('#scheduleTable tbody').append(newRow);
            index++;
        });

        $(document).on('click', '.removeRow', function () {
            $(this).closest('tr').remove();
        });
    </script>
}
